<template>
  <header class="py-3 bg-dark text-white fixed-top shadow-sm w-100">
    <div class="container-fluid d-flex align-items-center px-3">
      <img
        src="@/assets/onigiri.PNG"
        alt="ã‚¢ã‚¤ã‚³ãƒ³"
        class="rounded-circle me-3"
        style="width: 40px; height: 40px; object-fit: cover"
      />
      <h1 class="h3 mb-0 text-white">taka-onigiri-dev</h1>
      <div class="dropdown ms-auto">
        <button
          class="btn btn-secondary dropdown-toggle"
          type="button"
          id="langDropdown"
          data-bs-toggle="dropdown"
          aria-expanded="false"
        >
          {{ languageLabel(locale) }}
        </button>
        <ul class="dropdown-menu" aria-labelledby="langDropdown">
          <li>
            <a class="dropdown-item" href="#" @click.prevent="setLocale('ja')">æ—¥æœ¬èª</a>
          </li>
          <li>
            <a class="dropdown-item" href="#" @click.prevent="setLocale('ko')">í•œêµ­ì–´</a>
          </li>
          <li>
            <a class="dropdown-item" href="#" @click.prevent="setLocale('en')">English</a>
          </li>
          <li>
            <a class="dropdown-item" href="#" @click.prevent="setLocale('zh')">ä¸­æ–‡</a>
          </li>
        </ul>
      </div>
    </div>
  </header>
</template>

<script setup lang="ts">
import { defineComponent } from 'vue'
import { useI18n } from 'vue-i18n'

const { t, messages, locale } = useI18n()

console.log('ğŸ—£ ç¾åœ¨ã®ãƒ­ã‚±ãƒ¼ãƒ«:', locale.value)
console.log('ğŸ—‚ èª­ã¿è¾¼ã¾ã‚ŒãŸ messages ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆ:', messages.value)
console.log('ğŸ§ª ç¾åœ¨ã®ãƒ­ã‚±ãƒ¼ãƒ«ã®ä¸­èº«:', messages.value[locale.value])
// messages.value[locale.value] ã‚’ä¸€æ—¦ any ã‚„ Record<string, any> ã¨ã—ã¦æ‰±ã†ä¾‹
const currentMessages = messages.value[locale.value] as Record<string, any>
console.log('ğŸ” "message.hello" ã«å¯¾å¿œã™ã‚‹å€¤:', currentMessages?.message?.hello)
const setLocale = (lang: string) => {
  locale.value = lang
}

const languageLabel = (lang: string) => {
  switch (lang) {
    case 'ja':
      return 'æ—¥æœ¬èª'
    case 'ko':
      return 'í•œêµ­ì–´'
    case 'en':
      return 'English'
    case 'zh':
      return 'ä¸­æ–‡'
    default:
      return lang
  }
}
</script>

<style scoped>
/* ...existing code... */
</style>
